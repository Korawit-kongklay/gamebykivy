#:kivy 2.0.0

<Dino>:
    size: 80, 80
    canvas:
        Rectangle:
            pos: self.pos
            size: self.size
            texture: self.texture  # Bind to the texture property

<Obstacle>:
    size: 30, 50
    canvas:
        Rectangle:
            source: 'gunman.jpg'  # คนครมีปืน
            pos: self.pos
            size: self.size

<Boss>:
    size: 60, 80  # บอสใหญ่ขึ้น
    canvas:
        Rectangle:
            source: 'boss.jpg'  # หัวหน้านักรบ
            pos: self.pos
            size: self.size

<Bullet>:
    size: 20, 5
    canvas:
        PushMatrix
        Rotate:
            angle: self.bullet_rotation  # ต้องเพิ่ม property bullet_rotation ใน Python class
            origin: self.center
        Color:
            rgba: 1, 1, 0, 1 #สีเหลือง
        Rectangle:
            pos: self.pos
            size: self.size
        PopMatrix

<BossBullet>:
    size: 15, 15
    canvas:
        Color:
            rgba: 1, 0, 0, 1  # สีแดง
        Ellipse:
            pos: self.pos
            size: self.size

<SpeedPowerUp>:
    size: 30, 30
    canvas:
        Color:
            rgba: 1, 1, 0, 1  # สีเหลือง
        Ellipse:
            pos: self.pos
            size: self.size

<ShieldPowerUp>:
    size: 30, 30
    canvas:
        Color:
            rgba: 0, 1, 1, 1  # สีฟ้า
        Ellipse:
            pos: self.pos
            size: self.size

<AmmoPowerUp>:
    size: 30, 30
    canvas:
        Color:
            rgba: 1, 0, 1, 1  # สีม่วง
        Ellipse:
            pos: self.pos
            size: self.size

<HealthPowerUp>:
    size: 30, 30
    canvas:
        Color:
            rgba: 1, 0, 0, 1  # สีแดง
        Ellipse:
            pos: self.pos
            size: self.size

<ScorePowerUp>:
    size: 30, 30
    canvas:
        Color:
            rgba: 0, 1, 0, 1  # สีเขียว
        Ellipse:
            pos: self.pos
            size: self.size

<DinoGame>:
    dino: dino
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'darkforest.gif'  # พื้นหลังนครศรีธรรมราช
    Dino:
        id: dino
        x: 50
        y: 0
    Label:
        text: f'Stage: {root.stage} Score: {root.score}'  # แสดงด่านและคะแนน (ไม่แสดงหัวใจ)
        font_size: 20
        top: root.top - 10
        right: root.right - 10
    Label:
        text: f'Game Over! Score: {root.score}' if not root.game_active and root.stage <= 5 else 'Back to Google!' if root.stage > 5 else ''
        font_size: 40
        center: root.center
    Button:
        text: 'Restart'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.4}
        opacity: 0 if root.game_active else 1
        disabled: root.game_active
        on_press: root.restart()